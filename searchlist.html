<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		<title>Order your sandwich online and beat the queues - Sandwich Sorted</title>

		<!-- Bootstrap -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/bootstrap-theme.min.css" rel="stylesheet">
		<link href="css/bootstrap-social.css" rel="stylesheet">
		<link href="css/font-awesome.min.css" rel="stylesheet">
		<link href="css/site.css" rel="stylesheet">

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>
	<body>
		<nav class="navbar navbar-inverse navbar-fixed-top">
			<div class="container-fluid">
				<div class="navbar-header hidden-sm hidden-xs">
					<a class="navbar-brand" href="index.html">
						<img src="images/logo_horiz.png" class="brand-logo" alt="Sandwich Sorted">
					</a>
				</div>

				<div class="navbar-header visible-sm visible-xs">
					<div>
						<a class="btn-back" href="index.html"><i class="fa fa-arrow-left fa-3"></i></a>
						<div class="navbar-shopname">CM14 5LF</div>
					</div>
				</div>

				<div class="navbar-collapse collapse" id="navbar" aria-expanded="false">
					<ul class="nav navbar-nav navbar-right hidden-sm hidden-xs">
						<li>
							<a href="login.html" id="lnkLogin">Login</a>
						</li>
						<li>
							<a href="#" onclick="openRightNav()">Menu <i class="fa fa-bars"></i></a>
						</li>
					</ul>
					<form class="navbar-form navbar-right hidden-sm hidden-xs">
						<div class="input-group">
							<span class="input-group-addon">
								<span class="glyphicon glyphicon-search glyphicon-search-gray"></span> 
							</span>
							<input type="text" class="form-control navbar-control-search" name="postcode" placeholder="CM145LF">
						</div>
					</form>
				</div>
			</div>
		</nav>

		<div id="navbar-home" class="navbar-main">
			<a href="#" class="closebtn" onclick="closeRightNav()">&times;</a>
			<a href="searchlist"><i class="fa fa-search" aria-hidden="true"></i> Search cafes</a>
			<a href="#"><i class="fa fa-bars" aria-hidden="true"></i> My Orders</a>
			<a href="settings.html"><i class="fa fa-cog" aria-hidden="true"></i> Settings</a>
			<a href="account.html"><i class="fa fa-user" aria-hidden="true"></i> My Account</a>
			<a href="#">And Another link</a>
			<hr style="width: 80%">
			<a href="login.html"><i class="fa fa-user" aria-hidden="true"></i> Login</a>
		</div>

		<div class="container-fluid">
			<div class="row">
				<div class="col-md-3 navbar-shoplist" id="navbar-shoplist">
					<div class="navbar-shoplist-heading">
						24 RESTAURANTS FOUND
					</div>
					<ul class="list-group">
						<li class="list-group-item shop-list">
							<div class="media-left">
								<a href="restaurantinfo.html">
									<img src="images/rsz_sw1.png" class="media-object img-rounded" alt="Sample Image">
								</a>
								<div class="image-caption-shop">
									<a href="javascript:markerClick(0);">
										<span class="glyphicon glyphicon-map-marker"></span>
										<small>0.5min</small>
									</a>
								</div>
							</div>
							<div class="media-body">
								<ul class="list-unstyled">
									<li><h4 class="media-heading">Lawson Cafe</h4></li>
									<li class="shop-collection">Collection 20 mins</li>
									<li>Cafe . Staples Street</li>
									<li>Open 08:30 - 17:30</li>
								</ul>
							</div>
						</li>
						<li class="list-group-item shop-list">
							<div class="media-left">
								<a href="restaurantinfo.html">
									<img src="images/rsz_sw2.png" class="media-object img-rounded" alt="Sample Image">
								</a>
								<div class="image-caption-shop">
									<a href="javascript:markerClick(1);">
										<span class="glyphicon glyphicon-map-marker"></span>
										<small>0.8min</small>
									</a>
								</div>
							</div>
							<div class="media-body">
								<ul class="list-unstyled">
									<li><h4 class="media-heading">LA Cafe</h4></li>
									<li class="shop-collection">Collection 45 mins</li>
									<li>Coffee Shop . Chindits Lane</li>
									<li>Open 08:30 - 17:30</li>
								</ul>
							</div>
						</li>
						<li class="list-group-item shop-list">
							<div class="media-left">
								<a href="restaurantinfo.html">
									<img src="images/rsz_sw3.png" class="media-object img-rounded" alt="Sample Image">
								</a>
								<div class="image-caption-shop">
									<a href="javascript:markerClick(2);">
										<span class="glyphicon glyphicon-map-marker"></span>
										<small>0.5min</small>
									</a>
								</div>
							</div>
							<div class="media-body">
								<ul class="list-unstyled">
									<li><h4 class="media-heading">Frangos Coffee Shop</h4></li>
									<li class="shop-collection">Collection 40 mins</li>
									<li>Coffee Shop . Chindits Lane</li>
									<li>Open 08:30 - 17:30</li>
								</ul>
							</div>
						</li>
						<li class="list-group-item shop-list">
							<div class="media-left">
								<a href="restaurantinfo.html">
									<img src="images/rsz_sw1.png" class="media-object img-rounded" alt="Sample Image">
								</a>
								<div class="image-caption-shop">
									<a href="javascript:markerClick(3);">
										<span class="glyphicon glyphicon-map-marker"></span>
										<small>0.5min</small>
									</a>
								</div>
							</div>
							<div class="media-body">
								<ul class="list-unstyled">
									<li><h4 class="media-heading">Cortado</h4></li>
									<li class="shop-collection">Collection 20 mins</li>
									<li>Coffee Shop . Chindits Lane</li>
									<li>Open 08:30 - 17:30</li>
								</ul>
							</div>
						</li>
						<li class="list-group-item shop-list">
							<div class="media-left">
								<a href="restaurantinfo.html">
									<img src="images/rsz_sw5.png" class="media-object img-rounded" alt="Sample Image">
								</a>
								<div class="image-caption-shop">
									<a href="javascript:markerClick(4);">
										<span class="glyphicon glyphicon-map-marker"></span>
										<small>0.5min</small>
									</a>
								</div>
							</div>
							<div class="media-body">
								<ul class="list-unstyled">
									<li><h4 class="media-heading">Walker's Restaurant</h4></li>
									<li class="shop-collection">Collection 45 mins</li>
									<li>Coffee Shop . Chindits Lane</li>
									<li>Open 08:30 - 17:30</li>
								</ul>
							</div>
						</li>
						<li class="list-group-item shop-list">
							<div class="media-left">
								<a href="restaurantinfo.html">
									<img src="images/rsz_sw6.png" class="media-object img-rounded" alt="Sample Image">
								</a>
								<div class="image-caption-shop">
									<a href="javascript:markerClick(5);">
										<span class="glyphicon glyphicon-map-marker"></span>
										<small>0.5min</small>
									</a>
								</div>
							</div>
							<div class="media-body">
								<ul class="list-unstyled">
									<li><h4 class="media-heading">Kambie Chinese Restaurant</h4></li>
									<li class="shop-collection">Collection 40 mins</li>
									<li>Coffee Shop . Chindits Lane</li>
									<li>Open 08:30 - 17:30</li>
								</ul>
							</div>
						</li>
						<li class="list-group-item shop-list">
							<div class="media-left">
								<a href="restaurantinfo.html">
									<img src="images/rsz_sw1.png" class="media-object img-rounded" alt="Sample Image">
								</a>
								<div class="image-caption-shop">
									<a href="javascript:markerClick(6);">
										<span class="glyphicon glyphicon-map-marker"></span>
										<small>0.5min</small>
									</a>
								</div>
							</div>
							<div class="media-body">
								<ul class="list-unstyled">
									<li><h4 class="media-heading">Curry's Restaurant</h4></li>
									<li class="shop-collection">Collection 20 mins</li>
									<li>Cafe . Staples Street</li>
									<li>Open 08:30 - 17:30</li>
								</ul>
							</div>
						</li>
					</ul>
				</div>
				<div class="col-md-9 main-map hidden-sm hidden-xs" id="mapContent">
					<div id="map-shop" class="nopadding-right-left">
							
					</div>
					<div class="btn-toggle-shoplist" onclick="openShopNav()">
						<span class="glyphicon glyphicon-triangle-left"></span>
					</div>
				</div>
			</div>
		</div>

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="js/jquery-3.1.1.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="js/bootstrap.min.js"></script>

		<script type="text/javascript">

			var navbarLeftWidth;
			var mapContentWidth;

			$(document).ready(function() {

				// Initial for mapContent height
				function setboxHeight() {
					var nbShoplstHeight = $("#navbar-shoplist").height();
					$("#map-shop").height(nbShoplstHeight);
				}

				setboxHeight();

				$(window).resize(function() {
					setboxHeight();
				});

				// Store the width of left navbar and mapContent
				navbarLeftWidth = $("#navbar-shoplist").width();
				mapContentWidth = $("#mapContent").width();

				// console.log("Initial of Left Navbar: " + navbarLeftWidth);
				// console.log("Initial of Map Content: " + mapContentWidth);

			});

			var googleMap;
			var infoWindows;
			var bounds;
			var searchPostCode = "ON N6C3N8";
			var markerList;

			var shopList = [
				{postcode: "ON N6A 1A1", name: "1. Lawson Cafe"},
				{postcode: "ON N6J 2J8", name: "2. LA Cafe"},
				{postcode: "ON N6J 1H6", name: "3. Frangos COffee Shop"},
				{postcode: "ON N6C 3P4", name: "4. Cortado"},
				{postcode: "ON N6B 2K9", name: "5. Walker's Restaurant"},
				{postcode: "ON N6B 1L4", name: "6. Kambie Chinese Restaurant"},
				{postcode: "ON N6C 4M8", name: "7. Curry's Restaurant"}
			];

			function initialize() {

				// Init the first map with the center of London
				googleMap = new google.maps.Map(document.getElementById('map-shop'), {
					zoom: 15,
					mapTypeControl: false,
					center: new google.maps.LatLng(51.509865, -0.118092),
					mapTypeId: google.maps.MapTypeId.ROADMAP
				});

				infoWindows = new google.maps.InfoWindow();
				bounds = new google.maps.LatLngBounds();

				markerList = [];

				searchAddress(searchPostCode);

				for (i = 0; i < shopList.length; i++) {
					searchAddress(shopList[i].postcode, shopList[i].name, true);
				}

				// Re-center map on window resize
				google.maps.event.addDomListener(window, 'resize', function() {
					var center = googleMap.getCenter();
					google.maps.event.trigger(googleMap, "resize");
					googleMap.setCenter(center);
				});

				// Override our map zoom level once our fitBounds function runs (Make sure it only runs once)
				var boundsListener = google.maps.event.addListener((googleMap), 'bounds_changed', function(event) {
					this.setZoom(14);
					google.maps.event.removeListener(boundsListener);
				});
			}

			function searchAddress(address, shopName, markerFlg = false) {

				var geocoder = new google.maps.Geocoder();
				var shopLocation;

				geocoder.geocode({'address': address}, function(results, status) {

					if (status == google.maps.GeocoderStatus.OK) {

						shopLocation = results[0].geometry.location;
						googleMap.setCenter(shopLocation);

						if (markerFlg) {

							createMarker(shopLocation, shopName);
						}

					} else {
						console.log("Geocode was not successful for the following reason: " + status);
					}
				});
			}

			function createMarker(location, shopName) {

				var marker = new google.maps.Marker({
					position: location,
					icon: "./images/coffee_shop_marker.png",
					map: googleMap
				});

				markerList.push(marker);

				bounds.extend(location);

				var markerTitle = "<b>" + shopName + "</b>";

				google.maps.event.addListener(marker, 'mouseover', function() { 
					infoWindows.setContent(markerTitle);
					infoWindows.open(googleMap, marker);
				});
		
				google.maps.event.addListener(marker, 'mouseout', function() { 
					infoWindows.close();
				});

				marker.addListener('click', function() {
					infoWindows.setContent(markerTitle);
					infoWindows.open(googleMap, marker);
					googleMap.setCenter(marker.getPosition());
				});

				googleMap.fitBounds(bounds);

			}

			function markerClick(id) {

				var marker = markerList[id];

				google.maps.event.trigger(marker, "click");

			}

		</script>



		<script src="js/sws.js"></script>

		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDab38v1LEO7Kn6Cc7oUgdGdvqooLHP9rg&callback=initialize"></script>

	</body>
</html>